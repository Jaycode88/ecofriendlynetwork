# Testing
Return back to the [README.md](README.md) file.

I have used various tools to Test Funcionality, Validity and responsiveness. I have been sure to check all layouts, colours, text, forms, links, buttons are functioning on all devices and screen sizes that I have tested.

## Code Validation

### HTML

I have used the recommended [HTML W3C Validator](https://validator.w3.org) to validate all of my HTML files. I checked validated by both URI and Copying and pasting the rendered page's source code into the checker.

- **Results:**

    - [Home](https://validator.w3.org/nu/?doc=https%3A%2F%2Fecofriendlynetwork-82b71b042579.herokuapp.com%2F)
    ![Home Results Pass](documentation/homehtml.webp)

    - [Sign Up](https://validator.w3.org/nu/?doc=https%3A%2F%2Fecofriendlynetwork-82b71b042579.herokuapp.com%2Faccounts%2Fsignup%2F)
    ![Sign Up Valid](documentation/signupvalid.webp)

    - [Sign In](https://validator.w3.org/nu/?doc=https%3A%2F%2Fecofriendlynetwork-82b71b042579.herokuapp.com%2Faccounts%2Flogin%2F)
    ![Sign In Results Pass](documentation/signinhtml.webp)

    - [Products](https://validator.w3.org/nu/?doc=https%3A%2F%2Fecofriendlynetwork-82b71b042579.herokuapp.com%2Fproducts%2F)
    ![Products Results Pass](documentation/productshtml.webp)

    - [Product Detail](https://validator.w3.org/nu/?doc=https%3A%2F%2Fecofriendlynetwork-82b71b042579.herokuapp.com%2Fproducts%2F1%2F)
    ![Product Detail Results Pass](documentation/productdetailhtml.webp)

    - [Blog](https://validator.w3.org/nu/?doc=https%3A%2F%2Fecofriendlynetwork-82b71b042579.herokuapp.com%2Fblog%2F)
    ![Blog Results Pass](documentation/bloghtml.webp)

    - [Blog Detail](https://validator.w3.org/nu/?doc=https%3A%2F%2Fecofriendlynetwork-82b71b042579.herokuapp.com%2Fblog%2F3%2F)
    ![Blog Detail Results Pass](documentation/blogdetailhtml.webp)

    - [Profile](https://validator.w3.org/nu/?doc=https%3A%2F%2Fecofriendlynetwork-82b71b042579.herokuapp.com%2Fprofile%2F)
    ![Profile Results Pass](documentation/profilevalid.webp)

    - [Shopping Bag](https://validator.w3.org/nu/?doc=https%3A%2F%2Fecofriendlynetwork-82b71b042579.herokuapp.com%2Fbag%2F)
    ![Shopping Bag Results Pass](documentation/bagvalid.webp)

    - [Checkout](https://validator.w3.org/nu/?doc=https%3A%2F%2Fecofriendlynetwork-82b71b042579.herokuapp.com%2Fcheckout%2F)
    ![Checkout Results Pass](documentation/checkoutvalid.webp)

    - [Checkout Success](https://validator.w3.org/nu/?doc=https%3A%2F%2Fecofriendlynetwork-82b71b042579.herokuapp.com%2Fcheckout%2Fcheckout_success%2FA44315E1218E45D3BD6F89C825B3791F)
    ![Checkout Success Results Pass](documentation/checkoutsuccessvalid.webp)

    -[Add Product](https://validator.w3.org/nu/?doc=https%3A%2F%2Fecofriendlynetwork-82b71b042579.herokuapp.com%2Fproducts%2Fadd%2F)
    ![Add Product Results Pass](documentation/addproductvalid.webp)

    - [Edit Product](https://validator.w3.org/nu/?doc=https%3A%2F%2Fecofriendlynetwork-82b71b042579.herokuapp.com%2Fproducts%2Fedit%2F1)
    ![Edit Product Results Pass](documentation/editproductvalid.webp)

    - [Add Blog Post](https://validator.w3.org/nu/?doc=https%3A%2F%2Fecofriendlynetwork-82b71b042579.herokuapp.com%2Fblog%2Fadd%2F)
    ![Add Blog results Pass](documentation/addblogvalid.webp)

    - [Edit Blog Post](https://validator.w3.org/nu/?doc=https%3A%2F%2Fecofriendlynetwork-82b71b042579.herokuapp.com%2Fblog%2Fedit%2F2)
    ![Edit Blog Results Pass](documentation/editblogvalid.webp)

    - [Order Stats](https://validator.w3.org/nu/?doc=https%3A%2F%2Fecofriendlynetwork-82b71b042579.herokuapp.com%2Fsales_stats%2Fmanage_orders%2F)
    ![Order Stats Results Pass](documentation/orderstatsvalid.webp)

    - [Product Stats](https://validator.w3.org/nu/?doc=https%3A%2F%2Fecofriendlynetwork-82b71b042579.herokuapp.com%2Fsales_stats%2Fstats%2F)
    ![Product Stats Results Pass](documentation/productstatsvalid.webp)

    - [View Order](https://validator.w3.org/nu/?doc=https%3A%2F%2Fecofriendlynetwork-82b71b042579.herokuapp.com%2Fsales_stats%2Forder_detail%2F11%2F)
    ![View Order Results Pass](documentation/viewordervalid.webp)

    - [Log Out](https://validator.w3.org/nu/?doc=https%3A%2F%2Fecofriendlynetwork-82b71b042579.herokuapp.com%2Faccounts%2Flogout%2F)
    ![Logout Results Pass](documentation/logoutvalid.webp)

    - [Password Reset](https://validator.w3.org/nu/?doc=https%3A%2F%2Fecofriendlynetwork-82b71b042579.herokuapp.com%2Faccounts%2Fpassword%2Freset%2F)
    ![Password Reset Results Pass](documentation/forgotvalid.webp)

on the Profile, Add Product, Edit Product, Add Blog, Edit Blog, Order Stats, Product Stats, View Order and Forgot Password pages you will see an info note in the validation results I have discussed this in the Unfixed Bugs section.

### CSS

I have used the recommended [CSS Jigsaw Validator](https://jigsaw.w3.org/css-validator) to validate all of my CSS files.

- **base.css**

link to results: [click here](https://jigsaw.w3.org/css-validator/validator?uri=https%3A%2F%2Fecofriendlynetwork-82b71b042579.herokuapp.com%2F&profile=css3svg&usermedium=all&warning=1&vextwarning=&lang=en)

![Css Valid](documentation/basecssvalid.webp)

- **Profile.css**

link to results:[click here](https://jigsaw.w3.org/css-validator/validator?uri=https%3A%2F%2Fecofriendlynetwork-82b71b042579.herokuapp.com%2F&profile=css3svg&usermedium=all&warning=1&vextwarning=&lang=en)

![Profile CSS Valid](documentation/profilecssvalid.webp)

- **checkout.css**

link to results:[click here](https://jigsaw.w3.org/css-validator/validator?uri=https%3A%2F%2Fecofriendlynetwork-82b71b042579.herokuapp.com%2Fcheckout%2F&profile=css3svg&usermedium=all&warning=1&vextwarning=&lang=en)

![Checkout CSS Valid](documentation/checkoutcssvalid.webp)

### JavaScript

I have used the recommended [JShint Validator](https://jshint.com) to validate my JS files. I used version 11 which does not throw errors due to use of ES6 syntax, Aswell as informing JSHint that I was intenionally using jQuery. To do so I have added the following line to the top of my script.js file:
```
/* jshint esversion: 11, jquery: true */
```

- **Results**

    - Countryfield.js
    ![Countryfield JS Valid](documentation/countryfieldjsvalid.webp)

    - products.html
    ![Products JS Valid](documentation/productsjsvalid.webp)

    - product_detail.html
    ![Product Detail JS Valid](documentation/productdetailjsvalid.webp)

    - quantity_buttons_script.html
    ![Quantity Button Script JS Valid](documentation/qbsjsvalid.webp)

    - image_upload_preview_script.html
    ![Image Upload Script JS Valid](documentation/iupsjsvalid.webp)

    - stripe_element.js
     ![Stripe Element Script JS Valid](documentation/stripeelementjsvalid.webp)

    - bag.html
    ![Bag JS Valid](documentation/bagjsvalid.webp)


### PEP8

I have used [Python Linter](https://pep8ci.herokuapp.com/) (Provided by CodeInstitute) to check all Python files are PEP8 compliant.

## Cross Platform Testing

### Browser Compatability
I've tested my deployed project on multiple browsers to check for compatibility issues.

### Responsiveness

### CRUD (create, read, update, delete) Testing

### Form Validation Testing

### LightHouse Testing
I used Google Chrome Lighthouse testing to assess the quality of the web app.

| Page | Results desktop | Results mobile |
|------|-----------------|----------------|
|Home| ![Lighthouse Home Desktop](documentation/homedesktop.webp)| ![Lighthouse Home Mobile](documentation/lighthomemob.webp) |
|Sign Up| ![Lighthouse Sign Up Desktop](documentation/lightsignupdesktop.webp)| ![Lighthouse Sign Up Mobile](documentation/lightsignupmob.webp) |
|Sign In| ![Lighthouse Sign In Desktop](documentation/signindesktop.webp)| ![Lighthouse Sign In Mobile](documentation/lightsigninmob.webp) |
|Products|![Lighthouse Product Desktop](documentation/lightproductdesktop.webp)|![Lighthouse Product Mobile](documentation/lightproductmob.webp)
|Product Detail| ![Lighthouse Product Detail Desktop](documentation/lighproductdetaildesk.webp)| ![Lighthouse Product Detail Mobile](documentation/lighproductdetailmob.webp) |
|Blog| ![Lighthouse Blog Desktop](documentation/lightblogdesk.webp)| ![Lighthouse Blog Mobile](documentation/lightblogmob.webp) |
|Blog Detail| ![Lighthouse Blog Detail Desktop](documentation/lightblogdetaildesk.webp)| ![Lighthouse Blog Detail Mobile](documentation/lightblogdetailmob.webp) |
|Profile| ![Lighthouse Profile Desktop](documentation/lightprofdesk.webp)| ![Lighthouse Profile Mobile](documentation/lightprofmob.webp) |
|Shopping Bag|![Lighthouse Bag Desktop](documentation/lightbagdesk.webp)| ![Lighthouse Bag Mobile](documentation/lightbagmob.webp) |
|Checkout Page|![Lighthouse Checkout Desktop](documentation/lightcheckdesk.webp)| ![Lighthouse Checkout Mobile](documentation/lightcheckmob.webp) |
|Checkout Success|![Lighthouse Checkout Success Desktop](documentation/lightchecksuccessdesk.webp)| ![Lighthouse Checkout Success Mobile](documentation/lightchecksuccessmob.webp) |
|Add Product|![Lighthouse Add Product Desktop](documentation/lightaddproddesk.webp)| ![Lighthouse Add Product Mobile](documentation/lightaddprodmob.webp) |
|Edit Product|![Lighthouse Edit Product Desktop](documentation/lighteditproddesk.webp)| ![Lighthouse Edit Product Mobile](documentation/lighteditprodmob.webp) |
|Add Blog Post|![Lighthouse Add Blog Desktop](documentation/lightaddblogdesk.webp)| ![Lighthouse Add Blog Mobile](documentation/lightaddblogmob.webp) |
|Edit Blog Post|![Lighthouse Edit Blog Desktop](documentation/lighteditblogdesk.webp)| ![Lighthouse Edit Blog Mobile](documentation/lighteditblogmob.webp) |
|Order Stats|![Lighthouse Order Stats Desktop](documentation/lightorderstatdesk.webp)| ![Lighthouse Order Stats Mobile](documentation/lightorderstatmob.webp) |
|Product Stats|![Lighthouse Product Stats Desktop](documentation/lightprodstatdesk.webp) | ![Lighthouse Product Stats Mobile](documentation/lightprodstatmob.webp) |
|View Order|![Lighthouse View Order Desktop](documentation/lightorderdesk.webp) | ![Lighthouse View Order Mobile](documentation/lightordermob.webp) |
|Log Out|![Lighthouse Log Out Desktop](documentation/lightlogoutdesk.webp) | ![Lighthouse Log Out Mobile](documentation/lightlogoutmob.webp) |
|Password reset|![Lighthouse Password Reset Desktop](documentation/lightresetdesk.webp) | ![Lighthouse Password Reset Mobile](documentation/lightresetmob.webp) |


## Defensive Programming

## User Story Testing

## Automated Testing
### Jest Testing JQuery

#### Jest test Issues 

### Python unit testing

## Bugs
### Fixed Bugs

- **Increment/Decrement Buttons**
    When Attempting to create the functionality for the shopping bag to be updated upon the click of the increment or decrement button being pushed rather than needing a submit button: I came accross great difficulty in that when i was pressing the increment or decrement buttons the no. of items value would increment or decrement by 2 rather than 1 When i tried to fix this I would get varying results mainly the buttons not disabling and enabling correctly or the increment and decrements going in values of 2. After a lot of time debugging I realised it was due to using the quantity input script in the bag template as I was changing the function it was nessacerry to completely  rewrite the code for the bag template and leave the quantity input script for the product details page only.

- **Custom Clearable file input**
    I was recieving the following error when attempting to load my add or edit product pages:
    ![File Input Error](documentation/customfileerror.webp)
    I found it was due to line 43/44 in my checkouts webhooks.py I had attempted to seperate lines to comply with PEP8 but I found This effected the code so the line had to be complete as one with a # noqa after it.
    ![File Input Fix](documentation/customfilefix.webp)

- **Email Confirmation**
    I found that on my deployed site order confirmation emails were not being sent. After much time looking over code and not finding the issue my mentor suggested checking that the webhook endpoint was correct in my Stripe settings. My mentor was right my Stripe webhook endpoint was still set to my site preview rather than my deployed site.

- **Sales Stats Favorites Count**
    The application was displaying inconsistent counts of how many users had marked a product as a favorite in the sales_stats app compared to the products app. The sales_stats app's count of favorites per product was incorrect, potentially leading to misleading data representation in the sales statistics.

    The discrepancy was caused by the way the total_favorites was calculated in the sales_stats view. Initially, the count of favorites might have included duplicate counts or was affected by other filters applied to the sales data, such as date ranges.

    Therefore the line of code responsible for counting the total number of favorites for each product in the sales_stats view was modified:
    ![Sales Stats Favorites Fix](documentation/favoritesfix.webp )

- **Signup Html Validation Error**
When attempting to validate HTML on the sign up page I was recieving the following error:
![Sign up HTML validation error](documentation/signuperror.webp).
It was suggested that the problem was due to an incompatability between the versions of packages I had installed particuraly Allauth, Django and Crispy Forms,  but when checking this I could not find an issue.
The only other option I had was to manually render the form in the signup.html rather than use crispy forms.
![Sign up html error fix](documentation/signupfix.webp)

## Unfixed Bugs
- **validation issues**
Whilst validating the HTML for the Profile, Add Prduct, Edit product, Add Blog, Edit Blog, Order Stats, Product Stats, View Order and Forgot Password pages, I recieved and info note(not an error) Regarding avoiding trailing slashes on void elements(see images)
![Profile Valid info image](documentation/profilebug.webp)
![Add Product Valid info image](documentation/addproductbug.webp)
![Edit Product Valid info image](documentation/editproductbug.webp)
![Add Blog Valid info image](documentation/addblogbug.webp)
![Edit Blog Valid info image](documentation/editblogbug.webp)
![Order Stats Valid info image](documentation/orderstatsbug.webp)
![Product Stats Valid info image](documentation/productstatsbug.webp)
![View Order Valid info image](documentation/vieworderbug.webp)
![Forgot Password Valid info image](documentation/forgotbug.webp)

I suspect this is due to a mis match in compatability between the versions of packages I have installed but as mentioned before I could not pin point this. As the validation note is only an info point and not a validation error or warning, I chose not to modify all the forms in a similar manner of which I did with the Signup error in the interest of completing the project on time.

In an ideal scenario in which I had more time to complete I would of liked to look further into this and resolve the issue completely.